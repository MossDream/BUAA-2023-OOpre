# 第五次作业指导书

## 第零部分：测试说明 & Junit要求

本次作业不设置`junit`覆盖率要求！同学们仅需提交功能代码即可。同时本次作业不设置强测。

## 第一部分：训练目标

- 掌握 Java 程序的 Bug 分析以及调试

## 第二部分：题目描述

### 背景介绍

写在前面：**本次作业的代码将不会和之后的的作业有任何开发关系，仅仅为了同学们巩固本次课的内容所用，其中涉及的会产生 bug 一些操作，同学们将来可能会用到，也可能会选择其他方法替代，但是请同学们本次弄清这些 bug 背后的原理，为课程组的代码 debug 。同时，为了达成课程的统一性，我们将采取和前几次作业同样的世界观**

魔法大陆上的魔王得知了冒险者的出现，决定用魔法制造一些恶灵士兵，构建成强大的军队来与冒险者作战。现在请你帮助魔王组建并管理它的军队。

以下提到的属性 咒语 是一个字符串，它是恶灵士兵的力量之源，其决定了士兵的力量，魔王会通过修改士兵的咒语来管理和强化士兵

为了方便你进行指挥，魔王向你介绍了它设想的军队和它掌握的有关魔法：

- 士兵（soldier）：拥有属性  名字(name)，拥有属性  咒语(incantation)
- 小队(team):  拥有属性 编号(id)  ， 拥有士兵的容器
- 魔王能使用的魔法有：

  1. 制造一个士兵
  2. 将若干个未被编队士兵编成一个小队
  3. 复制已经被编成的小队
  4. 对某个小队进行不合格士兵的筛选
  5. 将一个小队的成员并入另一个小队
  6. 批量增加一个小队的咒语
  7. 批量截取一个小队的咒语
- 同时，为了方便你随时查看军队的状态，它还为你提供了这几种查询信号：
  1. 统计 id 为 x（由输入提供）小队的士兵个数（统一编号为 8）
  2. 统计 id 为 x（由输入提供）小队中str（由输入提供）是该士兵咒语子串的士兵个数 (统一编号为 9)
  3. 统计没有被编队的士兵个数（统一编号为 10）

在本次作业中，你需要完成的任务是：

- 对课程组完成的代码分析调试，从而找到其中的bug，修复其中的bug以通过测试点。

### 题目说明

在本次作业中，初始情况下，魔王没有任何士兵，我们还是通过输入指令来指挥魔王的行为

下针对一些魔法进行说明：

1. 无特殊说明

2. 无特殊说明

3. 无特殊说明

4. 筛选规则：对其咒语进行查看，输入会提供一个整数，记作标准合格度。士兵的标准合格度为其**咒语字符串**中满足**特定条件 C **的不同**子串数目**（两个子串相同当且仅当两个子串的起止下标均相同）。<br>

   特定条件C的定义：字符串 s 满足特定条件 C 当且仅当 s首尾字符均为`@` 且 s中 `@` 字符的个数为 `2` 且 `s` 中大写字母的个数不少于小写字母个数。<br>

   例如一个士兵咒语为"@Adjalj134@@a@A@V"，可以看到，其中以@为首尾且中间不含@的有：

   - @Adjalj134@(`1` 个大写字母，多个小写字母，不成立)；

   - @@（数目均为 `0`，成立）；

   - @a@（不成立）；

   - @A@（成立）。

   因此合格度为 `2`。

   该魔法将所有合格度**小于**标准合格度的士兵**删除**。

5. 规则：设将 id2 小队并入 id1 中，则合并后小队名仍为 id1，id2 小队被取消（id2原本的成员不再从属于id2 小队，而从属于 id1 小队）。<br>同时，若两小队中存在一模一样（**定义：两者 name 的每一个字符都相等，incantation 的每一个字符都相等**）的两个士兵，则并入后的士兵仅保留其中一个。<br>例如 id2 的小队中有一个 name = "abc",incantation ="@A@a" 的士兵，id1 的小队中也有一个 name = "abc",incantation ="@A@a" 的士兵，则合并后，id1 的小队中有且仅有一个 name = "abc",incantation ="@A@a" 的士兵。

6. 规则：给定一个字符串，在小队所有士兵的咒语末尾加上该字符串。

7. 规则：将指定 id 小队内的所有士兵的咒语变成对其咒语进行`a，b`截取后的字符串。本指令依次输入两个非负整数a，b（不保证a，b的相对大小关系），定义`对字符串s进行a, b截取`操作，

   - 若`a <= b`则得到`字符串s`中从下标`a`到下标`b`的部分（包括下标`b`位置的字符），这里对两个特殊情况加以说明，如果`a`超出`s`下标范围的话得到空串，如果`b`超出`s`下标范围的话截取到`s`的末尾即可。
   - 若`a > b`则得到空串。

8. 无特殊说明。

9. 无特殊说明

为了保证要求的严谨性，我们在这里明确魔法3中复制的要求：

对于两个对象 A，B，当 A，B 满足以下要求时，我们称两者满足复制关系：

两个对象**不是同一个**（由 `System.out.println()` 输出后@的编号不同），但是对于其每一个属性 A：

   若该属性 A 为指导书中提到的 8 种数据类型（指`int`, `double`等）或字符串，则两者该属性A相等

   若该属性 A 为对象，两个对象的属性 A 满足复制关系

### 输入格式

第一行一个整数 *n*，表示操作的个数。接下来的 n 行，每行一个形如 `{type} {attribute}` 的操作，`{type}` 和 `{attribute}` 间、若干个 `{attribute}` 间使用**若干**个空格分割，操作输入形式及其含义如下。同时，为了方便测评，我们需要在需要执行一些指令后进行相关输出。具体要求也在下面的表中列出：

| 类型 | attribute                                                 | 意义                                                         | 输出（单独成行） |
| ---- | --------------------------------------------------------- | ------------------------------------------------------------ | ---------------- |
| 1    | `{name}`   `{incantation}`                                | 创造一个name属性为`{name}`的士兵，其咒语属性为`{incantation}` | 无               |
| 2    | `{id}`    `{num}`  `{name1}` `{name2}`....（共num个name） | 将`num`个未被编队的士兵`{name1}`-`{namen}`编成id为`{id}`的队 | 无               |
| 3    | `{id1}` `{id2}`                                           | 将编号为`{id1}`的队复制，新复制出来的队编号为`{id2}`         | 无               |
| 4    | `{id}` `{int}`                                            | 对id属性为`{id}`的小队进行筛选，标准数值为`{int}`            | 无               |
| 5    | `{id1}` `{id2}`                                           | 将编号为`{id2}`的队成员并入编号为`{id1}`的队中               | 无               |
| 6    | `{id}` `{str}`                                            | 将编号为`{id}`的队的所有士兵的咒语加上`{str}`                | 无               |
| 7    | `{id}` `{int1}` `{int2}`                                  | 将编号为`{id}`的队的所有士兵的咒语更新为各自进行`{int1}`,`{int2}`截取后的咒语字符串 | 无               |
| 8    | `{id}`                                                    | 统计编号为`{id}`的队的士兵数目                               | `{一个整数}`     |
| 9    | `{id}`  `{str}`                                           | 统计`{id}`小队中咒语含有子串`{str}`的士兵个数                | `{一个整数}`     |
| 10   | （此处无输入)                                             | 统计没有被编队的士兵个数                                     | `{一个整数}`     |

### 数据限制

在其中，所有在输入中提到的要被操作的小队的 id 均保证已存在。（除了"复制小队指令"中的新id是本次复制之前不曾存在过的id）

1. 保证此方法生成的士兵name均不相同
2. 保证提到的士兵均存在且未被编队。
3. 保证复制生成的小队 id 在本次复制之前不曾存在过，
4. 筛选标准满足：[0,100]

### 变量范围

| 变量          | 类型   | 说明                              |
| ------------- | ------ | --------------------------------- |
| `id `         | 整数   | 取值范围：0 - 2147483647，无前导0 |
| `name`        | 字符串 | 保证不会出现空白字符              |
| `incantation` | 字符串 | 保证不会出现空白字符              |

### 样例

**输入**

```
14
1 so0 @@@@@@@
1 so1 @AD@123sda@@@
1 so2 @AD@123Da@@@
2 1 2 so1 so2
3 1 2
4 1 1
4 2 2
10
8 1
8 2
5 1 2
6 1 @oohw5@
7 1 3 18
9 1 hw5
```

**输出**

```
1
2
2
2
```


